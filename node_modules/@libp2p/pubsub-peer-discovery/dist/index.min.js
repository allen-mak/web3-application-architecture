(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PPubsubPeerDiscovery = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PPubsubPeerDiscovery=(()=>{var ho=Object.create;var ze=Object.defineProperty;var po=Object.getOwnPropertyDescriptor;var mo=Object.getOwnPropertyNames;var go=Object.getPrototypeOf,yo=Object.prototype.hasOwnProperty;var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),T=(r,e)=>{for(var t in e)ze(r,t,{get:e[t],enumerable:!0})},fr=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of mo(e))!yo.call(r,o)&&o!==t&&ze(r,o,{get:()=>e[o],enumerable:!(n=po(e,o))||n.enumerable});return r};var O=(r,e,t)=>(t=r!=null?ho(go(r)):{},fr(e||!r||!r.__esModule?ze(t,"default",{value:r,enumerable:!0}):t,r)),bo=r=>fr(ze({},"__esModule",{value:!0}),r);var hr=w((Rs,lr)=>{var ue=1e3,fe=ue*60,le=fe*60,ee=le*24,wo=ee*7,xo=ee*365.25;lr.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return vo(r);if(t==="number"&&isFinite(r))return e.long?Eo(r):Co(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function vo(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*xo;case"weeks":case"week":case"w":return t*wo;case"days":case"day":case"d":return t*ee;case"hours":case"hour":case"hrs":case"hr":case"h":return t*le;case"minutes":case"minute":case"mins":case"min":case"m":return t*fe;case"seconds":case"second":case"secs":case"sec":case"s":return t*ue;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Co(r){var e=Math.abs(r);return e>=ee?Math.round(r/ee)+"d":e>=le?Math.round(r/le)+"h":e>=fe?Math.round(r/fe)+"m":e>=ue?Math.round(r/ue)+"s":r+"ms"}function Eo(r){var e=Math.abs(r);return e>=ee?Re(r,e,ee,"day"):e>=le?Re(r,e,le,"hour"):e>=fe?Re(r,e,fe,"minute"):e>=ue?Re(r,e,ue,"second"):r+" ms"}function Re(r,e,t,n){var o=e>=t*1.5;return Math.round(r/t)+" "+n+(o?"s":"")}});var pr=w((js,dr)=>{function Ao(r){t.debug=t,t.default=t,t.coerce=a,t.disable=i,t.enable=o,t.enabled=s,t.humanize=hr(),t.destroy=u,Object.keys(r).forEach(f=>{t[f]=r[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let h=0;for(let d=0;d<f.length;d++)h=(h<<5)-h+f.charCodeAt(d),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(f){let h,d=null,ae,m;function y(...v){if(!y.enabled)return;let E=y,F=Number(new Date),N=F-(h||F);E.diff=N,E.prev=h,E.curr=F,h=F,v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let _=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(M,I)=>{if(M==="%%")return"%";_++;let P=t.formatters[I];if(typeof P=="function"){let ce=v[_];M=P.call(E,ce),v.splice(_,1),_--}return M}),t.formatArgs.call(E,v),(E.log||t.log).apply(E,v)}return y.namespace=f,y.useColors=t.useColors(),y.color=t.selectColor(f),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(ae!==t.namespaces&&(ae=t.namespaces,m=t.enabled(f)),m),set:v=>{d=v}}),typeof t.init=="function"&&t.init(y),y}function n(f,h){let d=t(this.namespace+(typeof h>"u"?":":h)+f);return d.log=this.log,d}function o(f){t.save(f),t.namespaces=f,t.names=[],t.skips=[];let h,d=(typeof f=="string"?f:"").split(/[\s,]+/),ae=d.length;for(h=0;h<ae;h++)d[h]&&(f=d[h].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.slice(1)+"$")):t.names.push(new RegExp("^"+f+"$")))}function i(){let f=[...t.names.map(c),...t.skips.map(c).map(h=>"-"+h)].join(",");return t.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,d;for(h=0,d=t.skips.length;h<d;h++)if(t.skips[h].test(f))return!1;for(h=0,d=t.names.length;h<d;h++)if(t.names[h].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function a(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}dr.exports=Ao});var mr=w((L,je)=>{L.formatArgs=_o;L.save=Fo;L.load=Bo;L.useColors=So;L.storage=Io();L.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();L.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function So(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function _o(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+je.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),r.splice(n,0,e)}L.log=console.debug||console.log||(()=>{});function Fo(r){try{r?L.storage.setItem("debug",r):L.storage.removeItem("debug")}catch{}}function Bo(){let r;try{r=L.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Io(){try{return localStorage}catch{}}je.exports=pr()(L);var{formatters:To}=je.exports;To.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Kr=w((Ga,Wr)=>{Wr.exports=Bt;var Hr=128,ji=127,Vi=~ji,qi=Math.pow(2,31);function Bt(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Bt.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=qi;)e[t++]=r&255|Hr,r/=128;for(;r&Vi;)e[t++]=r&255|Hr,r>>>=7;return e[t]=r|0,Bt.bytes=t-n+1,e}});var Zr=w((Ha,Xr)=>{Xr.exports=It;var $i=128,Jr=127;function It(r,n){var t=0,n=n||0,o=0,i=n,s,c=r.length;do{if(i>=c||o>49)throw It.bytes=0,new RangeError("Could not decode varint");s=r[i++],t+=o<28?(s&Jr)<<o:(s&Jr)*Math.pow(2,o),o+=7}while(s>=$i);return It.bytes=i-n,t}});var Yr=w((Wa,Qr)=>{var Gi=Math.pow(2,7),Hi=Math.pow(2,14),Wi=Math.pow(2,21),Ki=Math.pow(2,28),Ji=Math.pow(2,35),Xi=Math.pow(2,42),Zi=Math.pow(2,49),Qi=Math.pow(2,56),Yi=Math.pow(2,63);Qr.exports=function(r){return r<Gi?1:r<Hi?2:r<Wi?3:r<Ki?4:r<Ji?5:r<Xi?6:r<Zi?7:r<Qi?8:r<Yi?9:10}});var Ke=w((Ka,en)=>{en.exports={encode:Kr(),decode:Zr(),encodingLength:Yr()}});var kt=w((pc,fn)=>{"use strict";function un(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function gs(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return un(r,t)}catch{t.message=r.message,t.stack=r.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),un(new o,t)}}fn.exports=gs});var yn=w((Cc,gn)=>{"use strict";gn.exports=vs;function vs(r,e){for(var t=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)t[n++]=arguments[o++];return new Promise(function(c,a){t[n]=function(f){if(i)if(i=!1,f)a(f);else{for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d++]=arguments[d];c.apply(null,h)}};try{r.apply(e||null,t)}catch(u){i&&(i=!1,a(u))}})}});var vn=w(xn=>{"use strict";var Qe=xn;Qe.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var ve=new Array(64),wn=new Array(123);for(z=0;z<64;)wn[ve[z]=z<26?z+65:z<52?z+71:z<62?z-4:z-59|43]=z++;var z;Qe.encode=function(e,t,n){for(var o=null,i=[],s=0,c=0,a;t<n;){var u=e[t++];switch(c){case 0:i[s++]=ve[u>>2],a=(u&3)<<4,c=1;break;case 1:i[s++]=ve[a|u>>4],a=(u&15)<<2,c=2;break;case 2:i[s++]=ve[a|u>>6],i[s++]=ve[u&63],c=0;break}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0)}return c&&(i[s++]=ve[a],i[s++]=61,c===1&&(i[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))};var bn="invalid encoding";Qe.decode=function(e,t,n){for(var o=n,i=0,s,c=0;c<e.length;){var a=e.charCodeAt(c++);if(a===61&&i>1)break;if((a=wn[a])===void 0)throw Error(bn);switch(i){case 0:s=a,i=1;break;case 1:t[n++]=s<<2|(a&48)>>4,s=a,i=2;break;case 2:t[n++]=(s&15)<<4|(a&60)>>2,s=a,i=3;break;case 3:t[n++]=(s&3)<<6|a,i=0;break}}if(i===1)throw Error(bn);return n-o};Qe.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var En=w((Ac,Cn)=>{"use strict";Cn.exports=Ye;function Ye(){this._listeners={}}Ye.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Ye.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],o=0;o<n.length;)n[o].fn===t?n.splice(o,1):++o;return this};Ye.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,n)}return this}});var Tn=w((Sc,In)=>{"use strict";In.exports=An(An);function An(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function o(a,u,f){e[0]=a,u[f]=t[0],u[f+1]=t[1],u[f+2]=t[2],u[f+3]=t[3]}function i(a,u,f){e[0]=a,u[f]=t[3],u[f+1]=t[2],u[f+2]=t[1],u[f+3]=t[0]}r.writeFloatLE=n?o:i,r.writeFloatBE=n?i:o;function s(a,u){return t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],e[0]}function c(a,u){return t[3]=a[u],t[2]=a[u+1],t[1]=a[u+2],t[0]=a[u+3],e[0]}r.readFloatLE=n?s:c,r.readFloatBE=n?c:s}():function(){function e(n,o,i,s){var c=o<0?1:0;if(c&&(o=-o),o===0)n(1/o>0?0:2147483648,i,s);else if(isNaN(o))n(2143289344,i,s);else if(o>34028234663852886e22)n((c<<31|2139095040)>>>0,i,s);else if(o<11754943508222875e-54)n((c<<31|Math.round(o/1401298464324817e-60))>>>0,i,s);else{var a=Math.floor(Math.log(o)/Math.LN2),u=Math.round(o*Math.pow(2,-a)*8388608)&8388607;n((c<<31|a+127<<23|u)>>>0,i,s)}}r.writeFloatLE=e.bind(null,Sn),r.writeFloatBE=e.bind(null,_n);function t(n,o,i){var s=n(o,i),c=(s>>31)*2+1,a=s>>>23&255,u=s&8388607;return a===255?u?NaN:c*(1/0):a===0?c*1401298464324817e-60*u:c*Math.pow(2,a-150)*(u+8388608)}r.readFloatLE=t.bind(null,Fn),r.readFloatBE=t.bind(null,Bn)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function o(a,u,f){e[0]=a,u[f]=t[0],u[f+1]=t[1],u[f+2]=t[2],u[f+3]=t[3],u[f+4]=t[4],u[f+5]=t[5],u[f+6]=t[6],u[f+7]=t[7]}function i(a,u,f){e[0]=a,u[f]=t[7],u[f+1]=t[6],u[f+2]=t[5],u[f+3]=t[4],u[f+4]=t[3],u[f+5]=t[2],u[f+6]=t[1],u[f+7]=t[0]}r.writeDoubleLE=n?o:i,r.writeDoubleBE=n?i:o;function s(a,u){return t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],t[4]=a[u+4],t[5]=a[u+5],t[6]=a[u+6],t[7]=a[u+7],e[0]}function c(a,u){return t[7]=a[u],t[6]=a[u+1],t[5]=a[u+2],t[4]=a[u+3],t[3]=a[u+4],t[2]=a[u+5],t[1]=a[u+6],t[0]=a[u+7],e[0]}r.readDoubleLE=n?s:c,r.readDoubleBE=n?c:s}():function(){function e(n,o,i,s,c,a){var u=s<0?1:0;if(u&&(s=-s),s===0)n(0,c,a+o),n(1/s>0?0:2147483648,c,a+i);else if(isNaN(s))n(0,c,a+o),n(2146959360,c,a+i);else if(s>17976931348623157e292)n(0,c,a+o),n((u<<31|2146435072)>>>0,c,a+i);else{var f;if(s<22250738585072014e-324)f=s/5e-324,n(f>>>0,c,a+o),n((u<<31|f/4294967296)>>>0,c,a+i);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),f=s*Math.pow(2,-h),n(f*4503599627370496>>>0,c,a+o),n((u<<31|h+1023<<20|f*1048576&1048575)>>>0,c,a+i)}}}r.writeDoubleLE=e.bind(null,Sn,0,4),r.writeDoubleBE=e.bind(null,_n,4,0);function t(n,o,i,s,c){var a=n(s,c+o),u=n(s,c+i),f=(u>>31)*2+1,h=u>>>20&2047,d=4294967296*(u&1048575)+a;return h===2047?d?NaN:f*(1/0):h===0?f*5e-324*d:f*Math.pow(2,h-1075)*(d+4503599627370496)}r.readDoubleLE=t.bind(null,Fn,0,4),r.readDoubleBE=t.bind(null,Bn,4,0)}(),r}function Sn(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function _n(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function Fn(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function Bn(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var Ln=w((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Mn=w(Nn=>{"use strict";var jt=Nn;jt.length=function(e){for(var t=0,n=0,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(o+1)&64512)===56320?(++o,t+=4):t+=3;return t};jt.read=function(e,t,n){var o=n-t;if(o<1)return"";for(var i=null,s=[],c=0,a;t<n;)a=e[t++],a<128?s[c++]=a:a>191&&a<224?s[c++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[c++]=55296+(a>>10),s[c++]=56320+(a&1023)):s[c++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),c=0);return i?(c&&i.push(String.fromCharCode.apply(String,s.slice(0,c))),i.join("")):String.fromCharCode.apply(String,s.slice(0,c))};jt.write=function(e,t,n){for(var o=n,i,s,c=0;c<e.length;++c)i=e.charCodeAt(c),i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&((s=e.charCodeAt(c+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++c,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128);return n-o}});var Dn=w((Fc,Pn)=>{"use strict";Pn.exports=Cs;function Cs(r,e,t){var n=t||8192,o=n>>>1,i=null,s=n;return function(a){if(a<1||a>o)return r(a);s+a>n&&(i=r(n),s=0);var u=e.call(i,s,s+=a);return s&7&&(s=(s|7)+1),u}}});var On=w((Bc,Un)=>{"use strict";Un.exports=S;var Pe=ie();function S(r,e){this.lo=r>>>0,this.hi=e>>>0}var oe=S.zero=new S(0,0);oe.toNumber=function(){return 0};oe.zzEncode=oe.zzDecode=function(){return this};oe.length=function(){return 1};var Es=S.zeroHash="\0\0\0\0\0\0\0\0";S.fromNumber=function(e){if(e===0)return oe;var t=e<0;t&&(e=-e);var n=e>>>0,o=(e-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new S(n,o)};S.from=function(e){if(typeof e=="number")return S.fromNumber(e);if(Pe.isString(e))if(Pe.Long)e=Pe.Long.fromString(e);else return S.fromNumber(parseInt(e,10));return e.low||e.high?new S(e.low>>>0,e.high>>>0):oe};S.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};S.prototype.toLong=function(e){return Pe.Long?new Pe.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Q=String.prototype.charCodeAt;S.fromHash=function(e){return e===Es?oe:new S((Q.call(e,0)|Q.call(e,1)<<8|Q.call(e,2)<<16|Q.call(e,3)<<24)>>>0,(Q.call(e,4)|Q.call(e,5)<<8|Q.call(e,6)<<16|Q.call(e,7)<<24)>>>0)};S.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};S.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};S.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};S.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var ie=w(Vt=>{"use strict";var l=Vt;l.asPromise=yn();l.base64=vn();l.EventEmitter=En();l.float=Tn();l.inquire=Ln();l.utf8=Mn();l.pool=Dn();l.LongBits=On();l.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);l.global=l.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Vt;l.emptyArray=Object.freeze?Object.freeze([]):[];l.emptyObject=Object.freeze?Object.freeze({}):{};l.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};l.isString=function(e){return typeof e=="string"||e instanceof String};l.isObject=function(e){return e&&typeof e=="object"};l.isset=l.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};l.Buffer=function(){try{var r=l.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();l._Buffer_from=null;l._Buffer_allocUnsafe=null;l.newBuffer=function(e){return typeof e=="number"?l.Buffer?l._Buffer_allocUnsafe(e):new l.Array(e):l.Buffer?l._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};l.Array=typeof Uint8Array<"u"?Uint8Array:Array;l.Long=l.global.dcodeIO&&l.global.dcodeIO.Long||l.global.Long||l.inquire("long");l.key2Re=/^true|false|0|1$/;l.key32Re=/^-?(?:0|[1-9][0-9]*)$/;l.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;l.longToHash=function(e){return e?l.LongBits.from(e).toHash():l.LongBits.zeroHash};l.longFromHash=function(e,t){var n=l.LongBits.fromHash(e);return l.Long?l.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function kn(r,e,t){for(var n=Object.keys(e),o=0;o<n.length;++o)(r[n[o]]===void 0||!t)&&(r[n[o]]=e[n[o]]);return r}l.merge=kn;l.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function zn(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&kn(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}l.newError=zn;l.ProtocolError=zn("ProtocolError");l.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var o=Object.keys(this),i=o.length-1;i>-1;--i)if(t[o[i]]===1&&this[o[i]]!==void 0&&this[o[i]]!==null)return o[i]}};l.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};l.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};l._configure=function(){var r=l.Buffer;if(!r){l._Buffer_from=l._Buffer_allocUnsafe=null;return}l._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},l._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var Gt=w((Tc,$n)=>{"use strict";$n.exports=x;var $=ie(),$t,Vn=$.LongBits,As=$.utf8;function R(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function x(r){this.buf=r,this.pos=0,this.len=r.length}var Rn=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new x(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new x(e);throw Error("illegal buffer")},qn=function(){return $.Buffer?function(t){return(x.create=function(o){return $.Buffer.isBuffer(o)?new $t(o):Rn(o)})(t)}:Rn};x.create=qn();x.prototype._slice=$.Array.prototype.subarray||$.Array.prototype.slice;x.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,R(this,10);return e}}();x.prototype.int32=function(){return this.uint32()|0};x.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function qt(){var r=new Vn(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw R(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw R(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}x.prototype.bool=function(){return this.uint32()!==0};function et(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}x.prototype.fixed32=function(){if(this.pos+4>this.len)throw R(this,4);return et(this.buf,this.pos+=4)};x.prototype.sfixed32=function(){if(this.pos+4>this.len)throw R(this,4);return et(this.buf,this.pos+=4)|0};function jn(){if(this.pos+8>this.len)throw R(this,8);return new Vn(et(this.buf,this.pos+=4),et(this.buf,this.pos+=4))}x.prototype.float=function(){if(this.pos+4>this.len)throw R(this,4);var e=$.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};x.prototype.double=function(){if(this.pos+8>this.len)throw R(this,4);var e=$.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};x.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw R(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};x.prototype.string=function(){var e=this.bytes();return As.read(e,0,e.length)};x.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw R(this,e);this.pos+=e}else do if(this.pos>=this.len)throw R(this);while(this.buf[this.pos++]&128);return this};x.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};x._configure=function(r){$t=r,x.create=qn(),$t._configure();var e=$.Long?"toLong":"toNumber";$.merge(x.prototype,{int64:function(){return qt.call(this)[e](!1)},uint64:function(){return qt.call(this)[e](!0)},sint64:function(){return qt.call(this).zzDecode()[e](!1)},fixed64:function(){return jn.call(this)[e](!0)},sfixed64:function(){return jn.call(this)[e](!1)}})}});var Kn=w((Lc,Wn)=>{"use strict";Wn.exports=se;var Hn=Gt();(se.prototype=Object.create(Hn.prototype)).constructor=se;var Gn=ie();function se(r){Hn.call(this,r)}se._configure=function(){Gn.Buffer&&(se.prototype._slice=Gn.Buffer.prototype.slice)};se.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};se._configure()});var Qt=w((Nc,Qn)=>{"use strict";Qn.exports=p;var D=ie(),Ht,tt=D.LongBits,Jn=D.base64,Xn=D.utf8;function De(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function Kt(){}function Ss(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function p(){this.len=0,this.head=new De(Kt,0,0),this.tail=this.head,this.states=null}var Zn=function(){return D.Buffer?function(){return(p.create=function(){return new Ht})()}:function(){return new p}};p.create=Zn();p.alloc=function(e){return new D.Array(e)};D.Array!==Array&&(p.alloc=D.pool(p.alloc,D.Array.prototype.subarray));p.prototype._push=function(e,t,n){return this.tail=this.tail.next=new De(e,t,n),this.len+=t,this};function Jt(r,e,t){e[t]=r&255}function _s(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function Xt(r,e){this.len=r,this.next=void 0,this.val=e}Xt.prototype=Object.create(De.prototype);Xt.prototype.fn=_s;p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Xt((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};p.prototype.int32=function(e){return e<0?this._push(Zt,10,tt.fromNumber(e)):this.uint32(e)};p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Zt(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}p.prototype.uint64=function(e){var t=tt.from(e);return this._push(Zt,t.length(),t)};p.prototype.int64=p.prototype.uint64;p.prototype.sint64=function(e){var t=tt.from(e).zzEncode();return this._push(Zt,t.length(),t)};p.prototype.bool=function(e){return this._push(Jt,1,e?1:0)};function Wt(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}p.prototype.fixed32=function(e){return this._push(Wt,4,e>>>0)};p.prototype.sfixed32=p.prototype.fixed32;p.prototype.fixed64=function(e){var t=tt.from(e);return this._push(Wt,4,t.lo)._push(Wt,4,t.hi)};p.prototype.sfixed64=p.prototype.fixed64;p.prototype.float=function(e){return this._push(D.float.writeFloatLE,4,e)};p.prototype.double=function(e){return this._push(D.float.writeDoubleLE,8,e)};var Fs=D.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var o=0;o<e.length;++o)t[n+o]=e[o]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(Jt,1,0);if(D.isString(e)){var n=p.alloc(t=Jn.length(e));Jn.decode(e,n,0),e=n}return this.uint32(t)._push(Fs,t,e)};p.prototype.string=function(e){var t=Xn.length(e);return t?this.uint32(t)._push(Xn.write,t,e):this._push(Jt,1,0)};p.prototype.fork=function(){return this.states=new Ss(this),this.head=this.tail=new De(Kt,0,0),this.len=0,this};p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new De(Kt,0,0),this.len=0),this};p.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};p._configure=function(r){Ht=r,p.create=Zn(),Ht._configure()}});var to=w((Mc,eo)=>{"use strict";eo.exports=G;var Yn=Qt();(G.prototype=Object.create(Yn.prototype)).constructor=G;var Y=ie();function G(){Yn.call(this)}G._configure=function(){G.alloc=Y._Buffer_allocUnsafe,G.writeBytesBuffer=Y.Buffer&&Y.Buffer.prototype instanceof Uint8Array&&Y.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var o=0;o<e.length;)t[n++]=e[o++]}};G.prototype.bytes=function(e){Y.isString(e)&&(e=Y._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(G.writeBytesBuffer,t,e),this};function Bs(r,e,t){r.length<40?Y.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}G.prototype.string=function(e){var t=Y.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Bs,t,e),this};G._configure()});var ks={};T(ks,{PubSubPeerDiscovery:()=>rt,TOPIC:()=>lo,pubsubPeerDiscovery:()=>Os});var j=O(mr(),1);var at={};T(at,{base58btc:()=>A,base58flickr:()=>Uo});function Lo(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var i=r.charAt(o),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=o}var c=r.length,a=r.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var y=0,v=0,E=0,F=m.length;E!==F&&m[E]===0;)E++,y++;for(var N=(F-E)*f+1>>>0,_=new Uint8Array(N);E!==F;){for(var U=m[E],M=0,I=N-1;(U!==0||M<v)&&I!==-1;I--,M++)U+=256*_[I]>>>0,_[I]=U%c>>>0,U=U/c>>>0;if(U!==0)throw new Error("Non-zero carry");v=M,E++}for(var P=N-v;P!==N&&_[P]===0;)P++;for(var ce=a.repeat(y);P<N;++P)ce+=r.charAt(_[P]);return ce}function d(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var y=0;if(m[y]!==" "){for(var v=0,E=0;m[y]===a;)v++,y++;for(var F=(m.length-y)*u+1>>>0,N=new Uint8Array(F);m[y];){var _=t[m.charCodeAt(y)];if(_===255)return;for(var U=0,M=F-1;(_!==0||U<E)&&M!==-1;M--,U++)_+=c*N[M]>>>0,N[M]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");E=U,y++}if(m[y]!==" "){for(var I=F-E;I!==F&&N[I]===0;)I++;for(var P=new Uint8Array(v+(F-I)),ce=v;I!==F;)P[ce++]=N[I++];return P}}}function ae(m){var y=d(m);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:ae}}var No=Lo,Mo=No,gr=Mo;var qs=new Uint8Array(0);var yr=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},H=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var br=r=>new TextEncoder().encode(r),wr=r=>new TextDecoder().decode(r);var nt=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ot=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vr(this,e)}},it=class{constructor(e){this.decoders=e}or(e){return vr(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},vr=(r,e)=>new it({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),st=class{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new nt(e,t,n),this.decoder=new ot(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},he=({name:r,prefix:e,encode:t,decode:n})=>new st(r,e,t,n),X=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:o}=gr(t,e);return he({prefix:r,name:e,encode:n,decode:i=>H(o(i))})},Po=(r,e,t,n)=>{let o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let i=r.length;for(;r[i-1]==="=";)--i;let s=new Uint8Array(i*t/8|0),c=0,a=0,u=0;for(let f=0;f<i;++f){let h=o[r[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<t|h,c+=t,c>=8&&(c-=8,s[u++]=255&a>>c)}if(c>=t||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},Do=(r,e,t)=>{let n=e[e.length-1]==="=",o=(1<<t)-1,i="",s=0,c=0;for(let a=0;a<r.length;++a)for(c=c<<8|r[a],s+=8;s>t;)s-=t,i+=e[o&c>>s];if(s&&(i+=e[o&c<<t-s]),n)for(;i.length*t&7;)i+="=";return i},b=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>he({prefix:e,name:r,encode(o){return Do(o,n,t)},decode(o){return Po(o,n,t,r)}});var A=X({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Uo=X({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ct={};T(ct,{base32:()=>k,base32hex:()=>Ro,base32hexpad:()=>Vo,base32hexpadupper:()=>qo,base32hexupper:()=>jo,base32pad:()=>ko,base32padupper:()=>zo,base32upper:()=>Oo,base32z:()=>$o});var k=b({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Oo=b({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ko=b({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zo=b({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ro=b({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jo=b({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Vo=b({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qo=b({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$o=b({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ft={};T(ft,{base64:()=>ut,base64pad:()=>Go,base64url:()=>Ho,base64urlpad:()=>Wo});var ut=b({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Go=b({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ho=b({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Wo=b({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});j.default.formatters.b=r=>r==null?"undefined":A.baseEncode(r);j.default.formatters.t=r=>r==null?"undefined":k.baseEncode(r);j.default.formatters.m=r=>r==null?"undefined":ut.baseEncode(r);j.default.formatters.p=r=>r==null?"undefined":r.toString();j.default.formatters.c=r=>r==null?"undefined":r.toString();j.default.formatters.k=r=>r==null?"undefined":r.toString();function Cr(r){return Object.assign((0,j.default)(r),{error:(0,j.default)(`${r}:error`),trace:(0,j.default)(`${r}:trace`)})}var te=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},W,Ve=class extends EventTarget{constructor(){super(...arguments),W.set(this,new Map)}listenerCount(e){let t=te(this,W,"f").get(e);return t==null?0:t.length}addEventListener(e,t,n){super.addEventListener(e,t,n);let o=te(this,W,"f").get(e);o==null&&(o=[],te(this,W,"f").set(e,o)),o.push({callback:t,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,t,n){super.removeEventListener(e.toString(),t??null,n);let o=te(this,W,"f").get(e);o!=null&&(o=o.filter(({callback:i})=>i!==t),te(this,W,"f").set(e,o))}dispatchEvent(e){let t=super.dispatchEvent(e),n=te(this,W,"f").get(e.type);return n==null||(n=n.filter(({once:o})=>!o),te(this,W,"f").set(e.type,n)),t}};W=new WeakMap;var lt=class extends Event{constructor(e,t){super(e,t),this.detail=t?.detail}},Er=globalThis.CustomEvent??lt;var qe=class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,n=e();return n===void 0&&(this.index=t),n}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,t,n,o){return this.readAtomically(()=>{let i=0,s=0,c=this.peekChar();if(c===void 0)return;let a=c==="0",u=2**(8*o)-1;for(;;){let f=this.readAtomically(()=>{let h=this.readChar();if(h===void 0)return;let d=Number.parseInt(h,e);if(!Number.isNaN(d))return d});if(f===void 0)break;if(i*=e,i+=f,i>u||(s+=1,t!==void 0&&s>t))return}if(s!==0)return!n&&a&&s>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[t]=n}return e})}readIPv6Addr(){let e=t=>{for(let n=0;n<t.length/2;n++){let o=n*2;if(n<t.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return t[o]=s[0],t[o+1]=s[1],t[o+2]=s[2],t[o+3]=s[3],[o+4,!0]}let i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[n,o]=e(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let i=new Uint8Array(14),s=16-(n+2),[c]=e(i.subarray(0,s));return t.set(i.subarray(0,c),16-c),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var Ar=45,Ko=15,de=new qe;function Sr(r){if(!(r.length>Ko))return de.new(r).parseWith(()=>de.readIPv4Addr())}function _r(r){if(!(r.length>Ar))return de.new(r).parseWith(()=>de.readIPv6Addr())}function Fr(r){if(!(r.length>Ar))return de.new(r).parseWith(()=>de.readIPAddr())}function Br(r){return Boolean(Sr(r))}function Ir(r){return Boolean(_r(r))}function $e(r){return Boolean(Fr(r))}var ht={};T(ht,{identity:()=>Jo});var Jo=he({prefix:"\0",name:"identity",encode:r=>wr(r),decode:r=>br(r)});var dt={};T(dt,{base2:()=>Xo});var Xo=b({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pt={};T(pt,{base8:()=>Zo});var Zo=b({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mt={};T(mt,{base10:()=>Qo});var Qo=X({prefix:"9",name:"base10",alphabet:"0123456789"});var gt={};T(gt,{base16:()=>Yo,base16upper:()=>ei});var Yo=b({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ei=b({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yt={};T(yt,{base36:()=>ti,base36upper:()=>ri});var ti=X({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ri=X({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bt={};T(bt,{base256emoji:()=>ai});var Tr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ni=Tr.reduce((r,e,t)=>(r[t]=e,r),[]),oi=Tr.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function ii(r){return r.reduce((e,t)=>(e+=ni[t],e),"")}function si(r){let e=[];for(let t of r){let n=oi[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var ai=he({prefix:"\u{1F680}",name:"base256emoji",encode:ii,decode:si});var Ct={};T(Ct,{sha256:()=>Fe,sha512:()=>_i});var ci=Mr,Lr=128,ui=127,fi=~ui,li=Math.pow(2,31);function Mr(r,e,t){e=e||[],t=t||0;for(var n=t;r>=li;)e[t++]=r&255|Lr,r/=128;for(;r&fi;)e[t++]=r&255|Lr,r>>>=7;return e[t]=r|0,Mr.bytes=t-n+1,e}var hi=wt,di=128,Nr=127;function wt(r,n){var t=0,n=n||0,o=0,i=n,s,c=r.length;do{if(i>=c)throw wt.bytes=0,new RangeError("Could not decode varint");s=r[i++],t+=o<28?(s&Nr)<<o:(s&Nr)*Math.pow(2,o),o+=7}while(s>=di);return wt.bytes=i-n,t}var pi=Math.pow(2,7),mi=Math.pow(2,14),gi=Math.pow(2,21),yi=Math.pow(2,28),bi=Math.pow(2,35),wi=Math.pow(2,42),xi=Math.pow(2,49),vi=Math.pow(2,56),Ci=Math.pow(2,63),Ei=function(r){return r<pi?1:r<mi?2:r<gi?3:r<yi?4:r<bi?5:r<wi?6:r<xi?7:r<vi?8:r<Ci?9:10},Ai={encode:ci,decode:hi,encodingLength:Ei},Si=Ai,Se=Si;var _e=(r,e=0)=>[Se.decode(r,e),Se.decode.bytes],pe=(r,e,t=0)=>(Se.encode(r,e,t),e),me=r=>Se.encodingLength(r);var V=(r,e)=>{let t=e.byteLength,n=me(r),o=n+me(t),i=new Uint8Array(o+t);return pe(r,i,0),pe(t,i,n),i.set(e,o),new ge(r,t,e,i)},re=r=>{let e=H(r),[t,n]=_e(e),[o,i]=_e(e.subarray(n)),s=e.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new ge(t,o,s,e)},Pr=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&yr(r.bytes,t.bytes)}},ge=class{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}};var vt=({name:r,code:e,encode:t})=>new xt(r,e,t),xt=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?V(this.code,t):t.then(n=>V(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ur=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Fe=vt({name:"sha2-256",code:18,encode:Ur("SHA-256")}),_i=vt({name:"sha2-512",code:19,encode:Ur("SHA-512")});var Et={};T(Et,{identity:()=>ye});var Or=0,Fi="identity",kr=H,Bi=r=>V(Or,kr(r)),ye={code:Or,name:Fi,encode:kr,digest:Bi};var xa=new TextEncoder,va=new TextDecoder;var zr=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return Ni(t,At(r),e||A.encoder);default:return Mi(t,At(r),e||k.encoder)}};var Rr=new WeakMap,At=r=>{let e=Rr.get(r);if(e==null){let t=new Map;return Rr.set(r,t),t}return e},g=class{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Be)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Pi)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return g.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=V(e,t);return g.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return g.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&Pr(e.multihash,n.multihash)}toString(e){return zr(this,e)}toJSON(){return{"/":zr(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof g)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:o,multihash:i,bytes:s}=t;return new g(n,o,i,s||jr(n,o,i.bytes))}else if(t[Di]===!0){let{version:n,multihash:o,code:i}=t,s=re(o);return g.create(n,i,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Be)throw new Error(`Version 0 CID must use dag-pb (code: ${Be}) block encoding`);return new g(e,t,n,n.bytes)}case 1:{let o=jr(e,t,n.bytes);return new g(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return g.create(0,Be,e)}static createV1(e,t){return g.create(1,e,t)}static decode(e){let[t,n]=g.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=g.inspectBytes(e),n=t.size-t.multihashSize,o=H(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");let i=o.subarray(t.multihashSize-t.digestSize),s=new ge(t.multihashCode,t.digestSize,i,o);return[t.version===0?g.createV0(s):g.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[h,d]=_e(e.subarray(t));return t+=d,h},o=n(),i=Be;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=t,c=n(),a=n(),u=t+a,f=u-s;return{version:o,codec:i,multihashCode:c,digestSize:a,multihashSize:f,size:u}}static parse(e,t){let[n,o]=Li(e,t),i=g.decode(o);return At(i).set(n,e),i}},Li=(r,e)=>{switch(r[0]){case"Q":{let t=e||A;return[A.prefix,t.decode(`${A.prefix}${r}`)]}case A.prefix:{let t=e||A;return[A.prefix,t.decode(r)]}case k.prefix:{let t=e||k;return[k.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},Ni=(r,e,t)=>{let{prefix:n}=t;if(n!==A.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let o=e.get(n);if(o==null){let i=t.encode(r).slice(1);return e.set(n,i),i}else return o},Mi=(r,e,t)=>{let{prefix:n}=t,o=e.get(n);if(o==null){let i=t.encode(r);return e.set(n,i),i}else return o},Be=112,Pi=18,jr=(r,e,t)=>{let n=me(r),o=n+me(e),i=new Uint8Array(o+t.byteLength);return pe(r,i,0),pe(e,i,n),i.set(t,o),i},Di=Symbol.for("@ipld/js-cid/CID");var Z={...ht,...dt,...pt,...mt,...gt,...ct,...yt,...at,...ft,...bt},La={...Ct,...Et};function be(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function He(r=0){return globalThis.Buffer?.allocUnsafe!=null?be(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function qr(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var Vr=qr("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),St=qr("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=He(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Ui={utf8:Vr,"utf-8":Vr,hex:Z.base16,latin1:St,ascii:St,binary:St,...Z},We=Ui;function B(r,e="utf8"){let t=We[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var $r=Br,Oi=Ir,_t=function(r){let e=0;if(r=r.toString().trim(),$r(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(Oi(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let i=$r(t[n]),s;i&&(s=_t(t[n]),t[n]=B(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,B(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}let o=new Uint8Array(e+16);for(n=0;n<t.length;n++){let i=parseInt(t[n],16);o[e++]=i>>8&255,o[e++]=i&255}return o}throw new Error("invalid ip address")},Gr=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let o=[];for(let i=0;i<t;i++)o.push(r[e+i]);return o.join(".")}if(t===16){let o=[];for(let i=0;i<t;i+=2)o.push(n.getUint16(e+i).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Ie={},Ft={},zi=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];zi.forEach(r=>{let e=Ri(...r);Ft[e.code]=e,Ie[e.name]=e});function Ri(r,e,t,n,o){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(o)}}function C(r){if(typeof r=="number"){if(Ft[r]!=null)return Ft[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Ie[r]!=null)return Ie[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var q=O(Ke(),1);function Tt(r,e="utf8"){let t=We[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?be(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function K(r,e){e==null&&(e=r.reduce((o,i)=>o+i.length,0));let t=He(e),n=0;for(let o of r)t.set(o,n),n+=o.length;return be(t)}function nn(r,e){switch(C(r).code){case 4:case 41:return ts(e);case 6:case 273:case 33:case 132:return sn(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return ns(e);case 421:return as(e);case 444:return rn(e);case 445:return rn(e);case 466:return ss(e);default:return B(e,"base16")}}function on(r,e){switch(C(r).code){case 4:return tn(e);case 41:return tn(e);case 6:case 273:case 33:case 132:return Nt(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return rs(e);case 421:return os(e);case 444:return cs(e);case 445:return us(e);case 466:return is(e);default:return Tt(e,"base16")}}var Lt=Object.values(Z).map(r=>r.decoder),es=function(){let r=Lt[0].or(Lt[1]);return Lt.slice(2).forEach(e=>r=r.or(e)),r}();function tn(r){if(!$e(r))throw new Error("invalid ip address");return _t(r)}function ts(r){let e=Gr(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!$e(e))throw new Error("invalid ip address");return e}function Nt(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function sn(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function rs(r){let e=Tt(r),t=Uint8Array.from(q.default.encode(e.length));return K([t,e],t.length+e.length)}function ns(r){let e=q.default.decode(r);if(r=r.slice(q.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return B(r)}function os(r){let e;r[0]==="Q"||r[0]==="1"?e=re(A.decode(`z${r}`)).bytes:e=g.parse(r).multihash.bytes;let t=Uint8Array.from(q.default.encode(e.length));return K([t,e],t.length+e.length)}function is(r){let e=es.decode(r),t=Uint8Array.from(q.default.encode(e.length));return K([t,e],t.length+e.length)}function ss(r){let e=q.default.decode(r),t=r.slice(q.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+B(t,"base64url")}function as(r){let e=q.default.decode(r),t=r.slice(q.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return B(t,"base58btc")}function cs(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=k.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Nt(n);return K([t,o],t.length+o.length)}function us(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=k.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Nt(n);return K([t,o],t.length+o.length)}function rn(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=B(e,"base32"),o=sn(t);return`${n}:${o}`}var we=O(Ke(),1);function fs(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let o=t[n],i=C(o);if(i.size===0){e.push([o]);continue}if(n++,n>=t.length)throw cn("invalid address: "+r);if(i.path===!0){e.push([o,Ot(t.slice(n).join("/"))]);break}e.push([o,t[n]])}return e}function ls(r){let e=[];return r.map(t=>{let n=Ze(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),Ot(e.join("/"))}function hs(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=Ze(e);return e.length>1?[t.code,on(t.code,e[1])]:[t.code]})}function Mt(r){return r.map(e=>{let t=Ze(e);return e[1]!=null?[t.code,nn(t.code,e[1])]:[t.code]})}function Pt(r){return Xe(K(r.map(e=>{let t=Ze(e),n=Uint8Array.from(we.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=K([n,e[1]])),n})))}function Dt(r,e){return r.size>0?r.size/8:r.size===0?0:we.default.decode(e)+(we.default.decode.bytes??0)}function Je(r){let e=[],t=0;for(;t<r.length;){let n=we.default.decode(r,t),o=we.default.decode.bytes??0,i=C(n),s=Dt(i,r.slice(t+o));if(s===0){e.push([n]),t+=o;continue}let c=r.slice(t+o,t+o+s);if(t+=s+o,t>r.length)throw cn("Invalid address Uint8Array: "+B(r,"base16"));e.push([n,c])}return e}function Ut(r){let e=Je(r),t=Mt(e);return ls(t)}function ds(r){r=Ot(r);let e=fs(r),t=hs(e);return Pt(t)}function an(r){return ds(r)}function Xe(r){let e=ps(r);if(e!=null)throw e;return Uint8Array.from(r)}function ps(r){try{Je(r)}catch(e){return e}}function Ot(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function cn(r){return new Error("Error parsing address: "+r)}function Ze(r){return C(r[0])}var Rt=O(Ke(),1);var dn=O(kt(),1);function Te(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var xe=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},zt=function(r,e,t,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(r,t):o?o.value=t:e.set(r,t),t},Le,Ne,Me,ln,ys=Symbol.for("nodejs.util.inspect.custom"),hn=[C("dns").code,C("dns4").code,C("dns6").code,C("dnsaddr").code],bs=[C("p2p").code,C("ipfs").code],ws=new Map,pn=Symbol.for("@multiformats/js-multiaddr/multiaddr");function xs(r){return Boolean(r?.[pn])}var J=class{constructor(e){if(Le.set(this,void 0),Ne.set(this,void 0),Me.set(this,void 0),this[ln]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=Xe(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=an(e)}else if(xs(e))this.bytes=Xe(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return xe(this,Le,"f")==null&&zt(this,Le,Ut(this.bytes),"f"),xe(this,Le,"f")}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,o;if(t.length>2)hn.includes(e[0])&&bs.includes(e[1])?(n=C("tcp").name,o=443):(n=C(t[2]).name,o=parseInt(t[3]));else if(hn.includes(e[0]))n=C("tcp").name,o=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},C(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let o=Rt.default.decode(t,n),i=Rt.default.decode.bytes??0,s=C(o),c=Dt(s,t.slice(n+i));n+=c+i,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return xe(this,Ne,"f")==null&&zt(this,Ne,Je(this.bytes),"f"),xe(this,Ne,"f")}stringTuples(){return xe(this,Me,"f")==null&&zt(this,Me,Mt(this.tuples()),"f"),xe(this,Me,"f")}encapsulate(e){return e=new J(e),new J(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new J(n.slice(0,o))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new J(Pt(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Ie.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?B(A.decode(`z${n}`),"base58btc"):B(g.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>C(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return Te(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(i=>i.resolvable);if(t==null)return[this];let n=ws.get(t.name);if(n==null)throw(0,dn.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(i=>new J(i))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Le=new WeakMap,Ne=new WeakMap,Me=new WeakMap,ln=pn,ys)](){return`Multiaddr(${Ut(this.bytes)})`}};function mn(r){return new J(r)}var Yt=O(Gt(),1),ro=O(Kn(),1),er=O(Qt(),1),no=O(to(),1),oo=O(ie(),1);function Is(){oo.default._configure(),Yt.default._configure(ro.default),er.default._configure(no.default)}Is();var io=["uint64","int64","sint64","fixed64","sfixed64"];function Ts(r){for(let e of io){if(r[e]==null)continue;let t=r[e];r[e]=function(){return BigInt(t.call(this).toString())}}return r}function tr(r){return Ts(new Yt.default(r))}function Ls(r){for(let e of io){if(r[e]==null)continue;let t=r[e];r[e]=function(n){return t.call(this,n.toString())}}return r}function rr(){return Ls(er.default.create())}function nr(r,e){let t=tr(r instanceof Uint8Array?r:r.subarray());return e.decode(t)}function or(r,e){let t=rr();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var Ue;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(Ue||(Ue={}));function ir(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function sr(r,e){return ir("message",Ue.LENGTH_DELIMITED,r,e)}var Oe;(function(r){let e;r.codec=()=>(e==null&&(e=sr((t,n,o={})=>{if(o.lengthDelimited!==!1&&n.fork(),(o.writeDefaults===!0||t.publicKey!=null&&t.publicKey.byteLength>0)&&(n.uint32(10),n.bytes(t.publicKey)),t.addrs!=null)for(let i of t.addrs)n.uint32(18),n.bytes(i);o.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let o={publicKey:new Uint8Array(0),addrs:[]},i=n==null?t.len:t.pos+n;for(;t.pos<i;){let s=t.uint32();switch(s>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.addrs.push(t.bytes());break;default:t.skipType(s&7);break}}return o})),e),r.encode=t=>or(t,r.codec()),r.decode=t=>nr(t,r.codec())})(Oe||(Oe={}));var Ns=O(kt(),1);var so=Symbol.for("@libp2p/peer-id");var Ms=Symbol.for("nodejs.util.inspect.custom"),ao=Object.values(Z).map(r=>r.decoder).reduce((r,e)=>r.or(e),Z.identity.decoder),co=114,ar=36,cr=37,ke=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[so](){return!0}toString(){return this.string==null&&(this.string=A.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return g.createV1(co,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Te(this.multihash.bytes,e);if(typeof e=="string")return Ps(e).equals(this);if(e?.multihash?.bytes!=null)return Te(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[Ms](){return`PeerId(${this.toString()})`}},Ce=class extends ke{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},Ee=class extends ke{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Ae=class extends ke{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function Ps(r,e){if(e=e??ao,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=re(A.decode(`z${r}`));return r.startsWith("12D")?new Ee({multihash:t}):r.startsWith("16U")?new Ae({multihash:t}):new Ce({multihash:t})}return Ds(ao.decode(r))}function Ds(r){try{let e=re(r);if(e.code===ye.code){if(e.digest.length===ar)return new Ee({multihash:e});if(e.digest.length===cr)return new Ae({multihash:e})}if(e.code===Fe.code)return new Ce({multihash:e})}catch{return Us(g.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function Us(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==co)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===Fe.code)return new Ce({multihash:r.multihash});if(e.code===ye.code){if(e.digest.length===ar)return new Ee({multihash:r.multihash});if(e.digest.length===cr)return new Ae({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function uo(r,e){return r.length===ar?new Ee({multihash:V(ye.code,r),privateKey:e}):r.length===cr?new Ae({multihash:V(ye.code,r),privateKey:e}):new Ce({multihash:await Fe.digest(r),publicKey:r,privateKey:e})}var fo=Symbol.for("@libp2p/peer-discovery");var ur=Cr("libp2p:discovery:pubsub"),lo="_peer-discovery._p2p._pubsub",rt=class extends Ve{constructor(e,t={}){super();let{interval:n,topics:o,listenOnly:i}=t;this.components=e,this.interval=n??1e4,this.listenOnly=i??!1,Array.isArray(o)&&o.length>0?this.topics=o:this.topics=[lo],this._onMessage=this._onMessage.bind(this)}get[fo](){return!0}get[Symbol.toStringTag](){return"@libp2p/pubsub-peer-discovery"}isStarted(){return this.intervalId!=null}start(){}afterStart(){if(this.intervalId!=null)return;let e=this.components.pubsub;if(e==null)throw new Error("PubSub not configured");for(let t of this.topics)e.subscribe(t),e.addEventListener("message",this._onMessage);this.listenOnly||(this._broadcast(),this.intervalId=setInterval(()=>{this._broadcast()},this.interval))}beforeStop(){let e=this.components.pubsub;if(e==null)throw new Error("PubSub not configured");for(let t of this.topics)e.unsubscribe(t),e.removeEventListener("message",this._onMessage)}stop(){this.intervalId!=null&&(clearInterval(this.intervalId),this.intervalId=void 0)}_broadcast(){let e=this.components.peerId;if(e.publicKey==null)throw new Error("PeerId was missing public key");let t={publicKey:e.publicKey,addrs:this.components.addressManager.getAddresses().map(i=>i.bytes)},n=Oe.encode(t),o=this.components.pubsub;if(o==null)throw new Error("PubSub not configured");for(let i of this.topics)ur("broadcasting our peer data on topic %s",i),o.publish(i,n)}_onMessage(e){if(!this.isStarted())return;let t=e.detail;if(!this.topics.includes(t.topic))return;let n=Oe.decode(t.data);uo(n.publicKey).then(o=>{o.equals(this.components.peerId)||(ur("discovered peer %p on %s",o,t.topic),this.dispatchEvent(new Er("peer",{detail:{id:o,multiaddrs:n.addrs.map(i=>mn(i)),protocols:[]}})))}).catch(o=>{ur.error(o)})}};function Os(r={}){return e=>new rt(e,r)}return bo(ks);})();
return Libp2PPubsubPeerDiscovery}));
